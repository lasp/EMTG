
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NSGAIIpopulation &#8212; EMTG python  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for NSGAIIpopulation</h1><div class="highlight"><pre>
<span></span><span class="c1">#tool for reading NSGA-II population and archive files</span>
<span class="c1">#for use with EMTG-NSGAII outer-loop by Vavrina and Englander</span>
<span class="c1">#Python interface by Jacob Englander begun 3-16-2014</span>

<span class="kn">import</span> <span class="nn">Universe</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">ode</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">dates</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">ticker</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_agg</span> <span class="kn">import</span> <span class="n">FigureCanvas</span> <span class="k">as</span> <span class="n">FigureCanvas</span>

<div class="viewcode-block" id="NSGAII_outerloop_solution"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_solution">[docs]</a><span class="k">class</span> <span class="nc">NSGAII_outerloop_solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="c1">#constructor</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_line</span><span class="p">,</span> <span class="n">column_headers</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parse_input_line</span><span class="p">(</span><span class="n">input_line</span><span class="p">,</span> <span class="n">column_headers</span><span class="p">)</span>

    <span class="c1">#clear function</span>
<div class="viewcode-block" id="NSGAII_outerloop_solution.initialize"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_solution.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Xouter</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#outer-loop decision vector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Xinner</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#inner-loop decision vector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#vector of objective function values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_system_size</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#if applicable, power level of the array in kW</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thruster</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_thrusters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">launch_vehicle</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">launch_date</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># case name, can be parsed for data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputfilename</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mission_sequence</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generation_found</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#what generation was this solution found?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#at what time, in seconds from program start, was this solution found?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Legal_Solution</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="c1">#line parser</span>
<div class="viewcode-block" id="NSGAII_outerloop_solution.parse_input_line"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_solution.parse_input_line">[docs]</a>    <span class="k">def</span> <span class="nf">parse_input_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_line</span><span class="p">,</span> <span class="n">column_headers</span><span class="p">):</span>
        <span class="c1">#strip off the newline character</span>
        <span class="n">input_line</span> <span class="o">=</span> <span class="n">input_line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#strip the input line by commas</span>
        <span class="n">input_cell</span> <span class="o">=</span> <span class="n">input_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="c1">#declare arrays of launch vehicle and thruster names</span>
        <span class="n">LV_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AV401&#39;</span><span class="p">,</span><span class="s1">&#39;AV411&#39;</span><span class="p">,</span><span class="s1">&#39;AV421&#39;</span><span class="p">,</span><span class="s1">&#39;AV431&#39;</span><span class="p">,</span><span class="s1">&#39;AV501&#39;</span><span class="p">,</span><span class="s1">&#39;AV511&#39;</span><span class="p">,</span><span class="s1">&#39;AV521&#39;</span><span class="p">,</span><span class="s1">&#39;AV531&#39;</span><span class="p">,</span><span class="s1">&#39;AV541&#39;</span><span class="p">,</span><span class="s1">&#39;AV551&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;F910&#39;</span><span class="p">,</span><span class="s1">&#39;F911&#39;</span><span class="p">,</span><span class="s1">&#39;AV551s48&#39;</span><span class="p">,</span><span class="s1">&#39;F9H&#39;</span><span class="p">,</span><span class="s1">&#39;D4H&#39;</span><span class="p">,</span><span class="s1">&#39;SLSb1&#39;</span><span class="p">]</span>
        <span class="n">LV_preference_rank</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>

        <span class="n">thruster_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CHEM&#39;</span><span class="p">,</span><span class="s1">&#39;NSTAR&#39;</span><span class="p">,</span><span class="s1">&#39;XIPS25&#39;</span><span class="p">,</span><span class="s1">&#39;BPT4000HIsp&#39;</span><span class="p">,</span><span class="s1">&#39;BPT4000Hthrust&#39;</span><span class="p">,</span><span class="s1">&#39;BPT4000XHIsp&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;NEXTHIspv9&#39;</span><span class="p">,</span><span class="s1">&#39;VASIMRargon&#39;</span><span class="p">,</span><span class="s1">&#39;VSIxenonhall&#39;</span><span class="p">,</span><span class="s1">&#39;NEXTHIspv10&#39;</span><span class="p">,</span><span class="s1">&#39;NEXTHthrustv10&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;BPT4000MALTO&#39;</span><span class="p">,</span><span class="s1">&#39;NEXIS&#39;</span><span class="p">,</span><span class="s1">&#39;H6MS&#39;</span><span class="p">,</span><span class="s1">&#39;BHT20K&#39;</span><span class="p">,</span><span class="s1">&#39;HiVHAc&#39;</span><span class="p">,</span><span class="s1">&#39;13kWSTMDHallHisp&#39;</span><span class="p">,</span><span class="s1">&#39;13kWSTMDHallHthrust&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;NEXT-TT11-Hisp&#39;</span><span class="p">,</span><span class="s1">&#39;NEXT-TT11-Hthrust&#39;</span><span class="p">,</span><span class="s1">&#39;NEXT-TT11-expanded&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;13kWSTMDHall-10-1-2014-Hisp&#39;</span><span class="p">,</span><span class="s1">&#39;13kWSTMDHall-10-1-2014-Mthrust&#39;</span><span class="p">,</span><span class="s1">&#39;13kWSTMDHall-10-1-2014-Hthrust&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">column_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_headers</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">column_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_cell</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Generation found&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">generation_found</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])</span>

                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;File name&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">outputfilename</span> <span class="o">=</span> <span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])</span>
            
                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Description&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span>

                    <span class="c1">#find the mission sequence descriptor</span>
                    <span class="n">left_parenthesis_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mission_sequence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="n">left_parenthesis_index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
                
                    <span class="c1">#reconstruct the full mission description from the case name</span>
                    <span class="n">descriptioncell</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">descriptionitem</span> <span class="ow">in</span> <span class="n">descriptioncell</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">descriptionitem</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;kW&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">descriptionitem</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">:</span> <span class="c1">#this entry encodes power system size</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">power_system_size</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">descriptionitem</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;kW&#39;</span><span class="p">))</span>

                        <span class="k">if</span> <span class="n">descriptionitem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;nTh&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">number_of_thrusters</span> <span class="o">=</span> <span class="n">descriptionitem</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;nTh&#39;</span><span class="p">)</span>

                        <span class="k">for</span> <span class="n">LV_name</span> <span class="ow">in</span> <span class="n">LV_names</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">descriptionitem</span> <span class="o">==</span> <span class="n">LV_name</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">launch_vehicle</span> <span class="o">=</span> <span class="n">descriptionitem</span>

                        <span class="k">for</span> <span class="n">thruster_name</span> <span class="ow">in</span> <span class="n">thruster_names</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">descriptionitem</span> <span class="o">==</span> <span class="n">thruster_name</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">thruster</span> <span class="o">=</span> <span class="n">thruster_name</span>

                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thruster</span> <span class="o">==</span> <span class="s1">&#39;CHEM&#39;</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">power_system_size</span> <span class="o">=</span> <span class="mf">0.0</span>

                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;BOL power at 1 AU (kW)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;First journey departure C3 (km^2/s^2)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Final journey arrival C3 (km^2/s^2)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Final journey arrival declination(deg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total deterministic delta-v (km/s)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total propellant mass including margin (kg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Final journey interface velocity (km/s)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Thruster duty cycle&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Normalized aggregate control&#39;</span><span class="p">:</span>
                    <span class="c1">#this entry is an objective function value</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Thruster preference&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Number of thrusters&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Launch vehicle preference&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mf">1.0e+50</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Launch vehicle preference&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">LV_preference_rank</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Delivered mass to final target (kg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Final journey mass increment (for maximizing sample return)&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Dry mass margin&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bus power (kW)&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Gene &#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Xouter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span>
                <span class="k">elif</span>  <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Number of journeys&#39;</span> \
                    <span class="ow">or</span> <span class="n">column_headers</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Point-group value&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mf">1.0e+50</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">])))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span>

                <span class="k">elif</span> <span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="c1">#this entry is a member of the inner-loop decision vector</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Xinner</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">input_cell</span><span class="p">[</span><span class="n">column_index</span><span class="p">]))</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_solution.plot_solution"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_solution.plot_solution">[docs]</a>    <span class="k">def</span> <span class="nf">plot_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">PopulationAxes</span><span class="p">,</span> <span class="n">PopulationFigure</span><span class="p">,</span> <span class="n">ordered_list_of_objectives</span><span class="p">,</span> <span class="n">colorbar</span><span class="p">,</span> <span class="n">lowerbounds</span><span class="p">,</span> <span class="n">upperbounds</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1">#2D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">PopulationAxes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1">#3D</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">PopulationAxes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#4D</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">PopulationAxes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">4</span><span class="p">]],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set_clim</span><span class="p">([</span><span class="n">lowerbounds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">upperbounds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
                <span class="n">colorbar</span> <span class="o">=</span> <span class="n">PopulationFigure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">PopulationAxes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">4</span><span class="p">]],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set_clim</span><span class="p">([</span><span class="n">lowerbounds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">upperbounds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">picker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;pick_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onpick</span><span class="p">)</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_solution.onpick"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_solution.onpick">[docs]</a>    <span class="k">def</span> <span class="nf">onpick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#description = []</span>
        <span class="c1">#for objective_index in ordered_list_of_objectives:</span>
        <span class="c1">#    description = description + self.objective_column_headers[objective_index] + &#39;: &#39; + str(</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ind</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">_offsets3d</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span></div></div>
        <span class="c1">#print self.description, x[ind], y[ind], z[ind]</span>
        <span class="c1">#print ind</span>


<span class="c1">#top-level container of NSGAII_outerloop_solution objects</span>
<div class="viewcode-block" id="NSGAII_outerloop_population"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population">[docs]</a><span class="k">class</span> <span class="nc">NSGAII_outerloop_population</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        
    <span class="c1">#constructor</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">population_file_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parse_population_file</span><span class="p">(</span><span class="n">population_file_name</span><span class="p">)</span>

<div class="viewcode-block" id="NSGAII_outerloop_population.clear"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#vector of NSGAII_outerloop_solution objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legal_solutions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_column_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gene_column_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_feasible_solutions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points_array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution_points</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="c1">#method to read a population file</span>
<div class="viewcode-block" id="NSGAII_outerloop_population.parse_population_file"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.parse_population_file">[docs]</a>    <span class="k">def</span> <span class="nf">parse_population_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">population_file_name</span><span class="p">):</span>
        <span class="c1">#Step 1: attempt to open a population file</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">population_file_name</span><span class="p">):</span>
            <span class="n">inputfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">population_file_name</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">success</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unable to open&quot;</span><span class="p">,</span> <span class="n">population_file_name</span><span class="p">,</span> <span class="s2">&quot;EMTG Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">success</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">return</span>

        <span class="c1">#Step 2: scan through the file</span>
        <span class="n">linenumber</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inputfile</span><span class="p">:</span>
            <span class="c1">#strip off the newline character</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">linenumber</span> <span class="o">=</span> <span class="n">linenumber</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="c1">#the fourth line of the population file contains the column headers</span>
            <span class="k">if</span> <span class="n">linenumber</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">global_column_headers</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_column_headers</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;BOL power at 1 AU (kW)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Thruster preference&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Number of thrusters&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Launch vehicle preference&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Delivered mass to final target (kg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Final journey mass increment (for maximizing sample return)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;First journey departure C3 (km^2/s^2)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Final journey arrival C3 (km^2/s^2)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Final journey arrival declination(deg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Total deterministic delta-v (km/s)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Inner-loop objective function&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Point-group value&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Total propellant mass including margin (kg)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Number of journeys&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Dry mass margin&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Final journey interface velocity (km/s)&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Thruster duty cycle&#39;</span> \
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Normalized aggregate control&#39;</span>\
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;bus power (kW)&#39;</span>\
                    <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;Final journey arrival declination (deg)&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

            <span class="c1">#the fifth line of the population file contains the gene names</span>
            <span class="k">elif</span> <span class="n">linenumber</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gene_column_headers</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

            <span class="c1">#every line after the fifth is a solution line</span>
            <span class="k">elif</span> <span class="n">linenumber</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">tempSolution</span> <span class="o">=</span> <span class="n">NSGAII_outerloop_solution</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_column_headers</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tempSolution</span><span class="p">)</span>
        <span class="n">inputfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="c1">#method to plot the population</span>
    <span class="c1">#input is an ordered list of objectives, [x, y, z, color]. If there are two objectives, a monochrome 2D plot will be shown. If there are three objectives, a monochrome 3D plot will be shown.</span>
    <span class="c1">#if there are four, a colored 3D plot will be shown. If there are more than four there will be an error message.</span>
<div class="viewcode-block" id="NSGAII_outerloop_population.plot_population"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.plot_population">[docs]</a>    <span class="k">def</span> <span class="nf">plot_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ordered_list_of_objectives</span><span class="p">,</span> <span class="n">LowerBounds</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">UpperBounds</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">TimeUnit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EpochUnit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">FontSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">BaseMarkerSize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">OutputWindow</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">PopulationFigure</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">PopulationAxes</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">Filter</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span> <span class="o">=</span> <span class="n">ordered_list_of_objectives</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LowerBounds</span> <span class="o">=</span> <span class="n">LowerBounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UpperBounds</span> <span class="o">=</span> <span class="n">UpperBounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">=</span> <span class="n">TimeUnit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">=</span> <span class="n">EpochUnit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BaseMarkerSize</span> <span class="o">=</span> <span class="n">BaseMarkerSize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span> <span class="o">=</span> <span class="n">OutputWindow</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span> <span class="o">=</span> <span class="n">Filter</span>

        <span class="c1">#first check to see if the correct number of objective function indices were supplied</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span> <span class="o">==</span> <span class="p">[]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s2">&quot;NSGAII_outerloop_population::plot_population ERROR. You must specify between two and five objective functions to plot.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">NeedtoShow</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">PopulationFigure</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">PopulationAxes</span> <span class="o">==</span> <span class="p">[]:</span>
            
            <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="c1">#self.PopulationFigure.rcParams.update({&#39;axes.titlesize&#39;: &#39;x-large&#39;})</span>


            <span class="c1">#plt.rcParams.update({&#39;axes.titlesize&#39;: &#39;small&#39;})</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.99</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
            <span class="n">NeedtoShow</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span> <span class="o">=</span> <span class="n">PopulationFigure</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span> <span class="o">=</span> <span class="n">PopulationAxes</span>

        <span class="c1">#build up a list of objective values to be plotted</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legal_solutions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">process_solution</span><span class="p">(</span><span class="n">solution</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.0e+99</span><span class="p">:</span>
                <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LowerBounds</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">UpperBounds</span> <span class="o">==</span> <span class="p">[]):</span>
                    <span class="c1">#if bounds were supplied, check to see if the solution fits inside the bounds</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)):</span>
                        <span class="k">if</span> <span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">LowerBounds</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span> <span class="ow">or</span> <span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">UpperBounds</span><span class="p">[</span><span class="n">obj</span><span class="p">]:</span>
                            <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">break</span>
                <span class="k">if</span> <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">legal_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">objective_values_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">objective_values_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">objective_values_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]])))</span>

        <span class="k">for</span> <span class="n">objective_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)):</span>
            <span class="n">objective_values_vector</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">solution</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">:</span>
                <span class="c1">#we are only interested in solutions which contain the bodies in our filter list</span>
                <span class="c1">#if there is no filter list, show all of the bodies</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span> <span class="o">==</span> <span class="p">[]:</span>
                    <span class="n">process_solution</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">filter_list</span> <span class="o">==</span> <span class="p">[]:</span>
                        <span class="n">FoundFlag</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">for</span> <span class="n">FilterBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">object_list</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">FilterBody</span> <span class="ow">in</span> <span class="n">solution</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                                <span class="n">process_solution</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
                                <span class="n">FoundFlag</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">FoundFlag</span><span class="p">:</span>
                            <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">FoundFlag</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">for</span> <span class="n">FilterBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">filter_list</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">FilterBody</span> <span class="ow">in</span> <span class="n">solution</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                                <span class="n">process_solution</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
                                <span class="n">FoundFlag</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">FoundFlag</span><span class="p">:</span>
                            <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">objective_values_vector</span><span class="p">))</span>

        <span class="c1">#determine upper and lower bounds on each objective</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upperbounds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowerbounds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">objective_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="n">objective_index</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upperbounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lowerbounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="n">objective_index</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lowerbounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.0e-10</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upperbounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0e-10</span><span class="p">)</span>

        <span class="c1">#plot each solution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_solution_points</span><span class="p">()</span>

        <span class="c1">#set the axes labels</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Flight time (years)&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Launch Epoch (TDB Gregorian)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">w_xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_date</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flight time (years)&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Launch Epoch (TDB Gregorian)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">w_yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_date</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Flight time (years)&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Launch Epoch (TDB Gregorian)&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">w_zaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_date</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scalez</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">NeedtoShow</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">zaxis</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="o">+</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">get_zticklabels</span><span class="p">()):</span>
             <span class="n">item</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="n">FontSize</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">FontSize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">FontSize</span><span class="p">)</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_population.plot_solution_points"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.plot_solution_points">[docs]</a>    <span class="k">def</span> <span class="nf">plot_solution_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">X</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">C</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">solution</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">Y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">Y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">Z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">Z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>


                <span class="c1">#if there is a fifth objective, size the markers to reflect it</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BaseMarkerSize</span> <span class="o">*</span> <span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">4</span><span class="p">]])</span><span class="c1"># / (self.upperbounds[4] - self.lowerbounds[4]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BaseMarkerSize</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution_points</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solution_points</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">C</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_feasible_solutions</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number_of_feasible_solutions</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; solutions meet the applied filters.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">picker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;pick_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onpick</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legal_solutions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">==</span> <span class="p">[]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre_colorbar_position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_colorbar_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationAxes</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PopulationFigure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solution_points</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="NSGAII_outerloop_population.force_update"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.force_update">[docs]</a>    <span class="k">def</span> <span class="nf">force_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">solution</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">solution</span><span class="o">.</span><span class="n">Legal_Solution</span><span class="p">:</span>
                <span class="n">solution</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">changed</span><span class="p">()</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_population.onpick"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.onpick">[docs]</a>    <span class="k">def</span> <span class="nf">onpick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ind</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1">#2D</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;2D picker not implemented</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ordered_list_of_objectives</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1">#3D or 4D plot</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">_offsets3d</span>

                <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">[</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">idy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">y</span><span class="p">[</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">idz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_values_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">z</span><span class="p">[</span><span class="n">ind</span><span class="p">])</span>

                <span class="n">SolutionIndex</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">idy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">idz</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ThisSolution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legal_solutions</span><span class="p">[</span><span class="n">SolutionIndex</span><span class="p">]</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Description: &#39;</span> <span class="o">+</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">description</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">outputfilename</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    
                    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Windows&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Output file: &#39;</span> <span class="o">+</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">outputfilename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.emtg</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Output file: &#39;</span> <span class="o">+</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">outputfilename</span> <span class="o">+</span> <span class="s1">&#39;.emtg</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">objIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Flight time (days)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Flight time (years): &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ThisSolution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Launch epoch (MJD)&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">EpochUnit</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">DateTimeFromJDN</span><span class="p">(</span><span class="n">ThisSolution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2400000.5</span><span class="p">)</span><span class="o">.</span><span class="n">GetTicks</span><span class="p">())</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Launch Epoch (TDB Gregorian): &#39;</span><span class="o">+</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m/</span><span class="si">%d</span><span class="s1">/%Y&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Thruster preference&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Thruster type: &#39;</span> <span class="o">+</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">thruster</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="n">objIndex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Launch vehicle preference&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;Launch vehicle: &#39;</span> <span class="o">+</span> <span class="n">ThisSolution</span><span class="o">.</span><span class="n">launch_vehicle</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_column_headers</span><span class="p">[</span><span class="n">objIndex</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span>  <span class="nb">str</span><span class="p">(</span><span class="n">ThisSolution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="n">objIndex</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">OutputWindow</span><span class="o">.</span><span class="n">WriteText</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_population.format_date"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.format_date">[docs]</a>    <span class="k">def</span> <span class="nf">format_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dates</span><span class="o">.</span><span class="n">num2date</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NSGAII_outerloop_population.generate_body_prevalence_report"><a class="viewcode-back" href="../PyEMTG/NSGAIIpopulation.html#NSGAIIpopulation.NSGAII_outerloop_population.generate_body_prevalence_report">[docs]</a>    <span class="k">def</span> <span class="nf">generate_body_prevalence_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Universe</span><span class="p">):</span>
        <span class="c1">#this method generates a list of tuples, (BodyName, NumberOfOccurrences)</span>
        <span class="c1">#pass in a Universe object, return a list of tuples</span>
        
        <span class="n">prevalence_report</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">Universe</span><span class="o">.</span><span class="n">bodies</span><span class="p">:</span>
            <span class="n">number_of_occurrences</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">solution</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">:</span>
                <span class="c1">#only book-keep feasible solutions</span>

                <span class="k">if</span> <span class="n">solution</span><span class="o">.</span><span class="n">objective_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1.0e+99</span> <span class="ow">and</span> <span class="n">body</span><span class="o">.</span><span class="n">shortname</span> <span class="ow">in</span> <span class="n">solution</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                    <span class="n">number_of_occurrences</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">prevalence_report</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">body</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">number_of_occurrences</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">prevalence_report</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">EMTG python</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PyEMTG/index.html">PyEMTG documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PEATSA/index.html">PEATSA documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptionsOverhaul/index.html">OptionsOverhaul documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, Jacob Englander, Donald Ellison, Jeremy Knittel, Noble Hatten.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>